"use strict";(self.webpackChunkkira_documentation=self.webpackChunkkira_documentation||[]).push([[8631],{5256:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>f,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var r=n(5893),s=n(1151),a=n(4866),o=n(5162);const i={title:"Governance-regulated Foreign Token Transfers",sidebar_position:4,slug:"/34367cb0-ee71-418f-9dc5-bcc8823b71e5"},l=void 0,c={id:"Stack/SEKAI--Backend/Modules/Tokens-Module/Governance-regulated-Foreign-Token-Transfers",title:"Governance-regulated Foreign Token Transfers",description:"Concept",source:"@site/tabs/docs/Stack/SEKAI--Backend/Modules/Tokens-Module/Governance-regulated-Foreign-Token-Transfers.mdx",sourceDirName:"Stack/SEKAI--Backend/Modules/Tokens-Module",slug:"/34367cb0-ee71-418f-9dc5-bcc8823b71e5",permalink:"/docs.kira.network/34367cb0-ee71-418f-9dc5-bcc8823b71e5",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Governance-regulated Foreign Token Transfers",sidebar_position:4,slug:"/34367cb0-ee71-418f-9dc5-bcc8823b71e5"},sidebar:"defaultSidebar",previous:{title:"Token Aliases Registrar",permalink:"/docs.kira.network/e163e1d7-f16e-4c0d-945c-db2efc13ea49"},next:{title:"Token Basketing",permalink:"/docs.kira.network/6c6d144f-f315-43f7-8fe7-289d98890a69"}},d={},h=[{value:"Concept",id:"22e0f2d993a7488b885efa35c0b62983",level:2},{value:"Filters mechanism",id:"51d0ee0e8c8c41b8914df112534e1a22",level:3},{value:"Parameters",id:"c0b16997472f4eeb8ba46c949fe5c8fc",level:2},{value:"Cli syntax &amp; examples",id:"e11aba2be5c447bb8c11935c4f113602",level:2},{value:"Transactions",id:"d9d37ffa3e5d409ebafdd46a1137665e",level:2},{value:"Queries",id:"2a33689889f04da9889e331913a3d542",level:2},{value:"List blacklisted &amp; whitelisted tokens",id:"00c35df7f2994764862c7136ad5d95ac",level:4},{value:"Governance",id:"68ee4d5375594154b7f930f3ec0d6a17",level:2},{value:"Whitelist and/or blacklist token transfers proposal",id:"45cfb0e749524b7292eb421de9702f07",level:4}];function u(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"22e0f2d993a7488b885efa35c0b62983",children:"Concept"}),"\n",(0,r.jsxs)(t.p,{children:["Foreign tokens can significantly impact the network's economy if they are stolen or originate from a compromised network (i.e. Luna). For instance, should a token experience sudden supply exploitation, it could pose a serious risk to the network's spam protection mechanism if used for fee payments. To mitigate this risk, KIRA\u2019s governance has the ability to create and manage blacklist and whitelist filters for foreign token transfers. These filters can be enabled or disabled through the ",(0,r.jsx)(t.code,{children:"enable_token_whitelist"})," and ",(0,r.jsx)(t.code,{children:"enable_token_blacklist"})," ",(0,r.jsx)(t.a,{href:"/b9b95792-b936-4603-8a46-15566f24e3c0",children:"network properties"}),", and their contents are curated through dedicated governance proposals. In the event that a foreign network becomes compromised and its tokens are deposited into KIRA, these filters can be used to recover funds through a planned hard fork. This process is similar to funds recovery in other Proof-of-Stake and Proof-of-Work chains, but offers on-chain signaling of the network governance's intentions."]}),"\n",(0,r.jsx)(t.h3,{id:"51d0ee0e8c8c41b8914df112534e1a22",children:"Filters mechanism"}),"\n",(0,r.jsxs)(t.p,{children:["When the ",(0,r.jsx)(t.code,{children:"enable_token_whitelist"})," network property is set to ",(0,r.jsx)(t.code,{children:"true"}),", SEKAI will check whether a given token is whitelisted before allowing it to be transferred. Similarly, when the ",(0,r.jsx)(t.code,{children:"enable_token_blacklist"})," network property is set to ",(0,r.jsx)(t.code,{children:"true"}),", SEKAI will check whether a given token is blacklisted before allowing it to be transferred. These checks are performed during the ",(0,r.jsx)(t.code,{children:"AnteHandler"})," phase of transaction processing."]}),"\n",(0,r.jsxs)(t.p,{children:["If a token is not on the whitelist (in the case of ",(0,r.jsx)(t.code,{children:"enable_token_whitelist"})," being set to ",(0,r.jsx)(t.code,{children:"true"}),") or is on the blacklist (in the case of ",(0,r.jsx)(t.code,{children:"enable_token_blacklist"})," being set to ",(0,r.jsx)(t.code,{children:"true"}),"), then the transaction will fail validation during the ",(0,r.jsx)(t.code,{children:"AnteHandler"})," phase, and the transaction will not be broadcasted to the network or included in any block."]}),"\n",(0,r.jsx)(t.h2,{id:"c0b16997472f4eeb8ba46c949fe5c8fc",children:"Parameters"}),"\n",(0,r.jsx)(t.h2,{id:"e11aba2be5c447bb8c11935c4f113602",children:"Cli syntax & examples"}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"Each CLI command and proposal process in KIRA requires specific permissions. These permissions must be added to the account's whitelist or obtained as sudo permissions for direct changes. Refer to the"})," ",(0,r.jsx)(t.a,{href:"/980ceb2f-9bc1-4133-aad0-bfb8a5c55536",children:(0,r.jsx)(t.em,{children:"Roles & Permissions"})})," ",(0,r.jsx)(t.em,{children:"documentation for more details."})," ",(0,r.jsx)(t.em,{children:(0,r.jsx)(t.code,{children:"$SIGNER"})})," ",(0,r.jsx)(t.em,{children:"represents the transaction signer's account name or address. For instructions on setting common flags as environment variables, such as"})," ",(0,r.jsx)(t.em,{children:(0,r.jsx)(t.code,{children:"$FLAGS_TX"})})," ",(0,r.jsx)(t.em,{children:"and"})," ",(0,r.jsxs)(t.em,{children:[(0,r.jsx)(t.code,{children:"$FLAGS_QR"}),"__, see the"]}),"  ",(0,r.jsx)(t.em,{children:"section"})]})}),"\n",(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(o.Z,{value:"transactions",label:"Transactions",children:[(0,r.jsx)(t.h2,{id:"d9d37ffa3e5d409ebafdd46a1137665e",children:"Transactions"}),(0,r.jsx)(t.p,{children:"There is no transactions other than the governance proposals for this sub-module."})]}),(0,r.jsxs)(o.Z,{value:"queries",label:"Queries",children:[(0,r.jsx)(t.h2,{id:"2a33689889f04da9889e331913a3d542",children:"Queries"}),(0,r.jsx)(t.table,{children:(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"token-black-whites"})}),(0,r.jsx)(t.th,{children:"Query lists of blacklisted/whitelisted tokens."})]})})}),(0,r.jsx)(t.h4,{id:"00c35df7f2994764862c7136ad5d95ac",children:"List blacklisted & whitelisted tokens"}),(0,r.jsx)(t.p,{children:"The following command is used to lists all blacklisted and whitelisted tokens."}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"sekaid query tokens token-black-whites $FLAGS_QR | jq\n"})})]}),(0,r.jsxs)(o.Z,{value:"governance",label:"Governance",children:[(0,r.jsx)(t.h2,{id:"68ee4d5375594154b7f930f3ec0d6a17",children:"Governance"}),(0,r.jsx)(t.table,{children:(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"proposal-update-tokens-blackwhite"})}),(0,r.jsx)(t.th,{children:"Create a proposal for whitelisting/blacklisting tokens."})]})})}),(0,r.jsx)(t.h4,{id:"45cfb0e749524b7292eb421de9702f07",children:"Whitelist and/or blacklist token transfers proposal"}),(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"proposal-update-tokens-blackwhite"})," CLI can be used by accounts with permission 24 to create a proposal for adding or modifying whitelist or blacklist tokens. To vote on the proposal, an account must have permission 25. The ",(0,r.jsx)(t.code,{children:"--is_add"})," flag specifies whether the token should be added (",(0,r.jsx)(t.code,{children:"true"}),") or removed (",(0,r.jsx)(t.code,{children:"false"}),") from the list, while the ",(0,r.jsx)(t.code,{children:"--is_blacklist"})," flag specifies which list to update (",(0,r.jsx)(t.code,{children:"true"})," for blacklist, ",(0,r.jsx)(t.code,{children:"false"})," for whitelist)."]}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Flags"})}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"$TITLE"}),": The title of the proposal."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"$DESCRIPTION"}),": The description of the proposal, which can be a URL, text, etc."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"$TOKENS"}),": A token or a comma-separated list of tokens (e.g., ",(0,r.jsx)(t.code,{children:"ATOM, KEX, BTC"}),")."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"$ISBLACKLIST"}),": Boolean value; ",(0,r.jsx)(t.code,{children:"true"})," to add/modify blacklist, ",(0,r.jsx)(t.code,{children:"false"})," for whitelist."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"$ISADD"}),": Boolean value; ",(0,r.jsx)(t.code,{children:"true"})," to add, ",(0,r.jsx)(t.code,{children:"false"})," to remove from the list."]}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"sekaid tx tokens proposal-update-tokens-blackwhite \\\n--from=$SIGNER $FLAGS_TX \\\n--title=$TITLE --description=$DESCRIPTION \\\n--is_add=$ISADD --is_blacklist=$ISBLACKLIST --tokens=$TOKENS\n"})})]})]})]})}function f(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},5162:(e,t,n)=>{n.d(t,{Z:()=>o});n(7294);var r=n(6905);const s={tabItem:"tabItem_Ymn6"};var a=n(5893);function o(e){let{children:t,hidden:n,className:o}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,o),hidden:n,children:t})}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(7294),s=n(6905),a=n(2466),o=n(6550),i=n(469),l=n(1980),c=n(7392),d=n(12);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return h(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:s}}=e;return{value:t,label:n,attributes:r,default:s}}))}(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function f(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:n}=e;const s=(0,o.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(s.location.search);t.set(a,e),s.replace({...s.location,search:t.toString()})}),[a,s])]}function p(e){const{defaultValue:t,queryString:n=!1,groupId:s}=e,a=u(e),[o,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!f({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:a}))),[c,h]=b({queryString:n,groupId:s}),[p,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,a]=(0,d.Nk)(n);return[s,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:s}),k=(()=>{const e=c??p;return f({value:e,tabValues:a})?e:null})();(0,i.Z)((()=>{k&&l(k)}),[k]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!f({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),m(e)}),[h,m,a]),tabValues:a}}var m=n(2389);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(5893);function j(e){let{className:t,block:n,selectedValue:r,selectValue:o,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),d=e=>{const t=e.currentTarget,n=l.indexOf(t),s=i[n].value;s!==r&&(c(t),o(s))},h=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:a}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:h,onClick:d,...a,className:(0,s.Z)("tabs__item",k.tabItem,a?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function v(e){let{lazy:t,children:n,selectedValue:s}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function g(e){const t=p(e);return(0,x.jsxs)("div",{className:(0,s.Z)("tabs-container",k.tabList),children:[(0,x.jsx)(j,{...e,...t}),(0,x.jsx)(v,{...e,...t})]})}function w(e){const t=(0,m.Z)();return(0,x.jsx)(g,{...e,children:h(e.children)},String(t))}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>o});var r=n(7294);const s={},a=r.createContext(s);function o(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);