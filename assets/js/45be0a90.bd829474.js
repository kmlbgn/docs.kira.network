"use strict";(self.webpackChunkkira_documentation=self.webpackChunkkira_documentation||[]).push([[1742],{963:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>h});var s=r(5893),t=r(1151),i=r(4866),d=r(5162);const a={title:"Upgrade Module",sidebar_position:2,slug:"/b87fd14e-b3d8-4a25-b0d2-0cda6bdc6478"},l=void 0,c={id:"KIRA\u2019s-stack/SEKAI/Modules/Upgrade/Upgrade-Module",title:"Upgrade Module",description:"Concept",source:"@site/docs/KIRA\u2019s-stack/SEKAI/Modules/Upgrade/Upgrade-Module.mdx",sourceDirName:"KIRA\u2019s-stack/SEKAI/Modules/Upgrade",slug:"/b87fd14e-b3d8-4a25-b0d2-0cda6bdc6478",permalink:"/docs.kira.network/docs/b87fd14e-b3d8-4a25-b0d2-0cda6bdc6478",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Upgrade Module",sidebar_position:2,slug:"/b87fd14e-b3d8-4a25-b0d2-0cda6bdc6478"},sidebar:"defaultSidebar",previous:{title:"Upgrade",permalink:"/docs.kira.network/docs/dd144b3a-8f4e-45cb-8133-b6ccda5f7722"},next:{title:"Fee processing",permalink:"/docs.kira.network/docs/184c11ed-4849-4ec5-acd0-f795b7abf467"}},o={},h=[{value:"Concept",id:"6ba6105bbb57434085533c9c0e0497e0",level:2},{value:"Parameters",id:"3e04b070eb15440fb32be7705a85fbdc",level:2},{value:"Upgrade configuration examples",id:"26a1fdae5da44a1087d2e19c99f98566",level:3},{value:"Upgrade plan example",id:"0cff5a2dae1b4f039c904237df25449e",level:3},{value:"<strong>Upgrade process</strong>",id:"8576cd2745b74f64bd2df866b9ebc5cf",level:2},{value:"Manual hard fork",id:"e101effdd1aa446eac7633d2a4475c77",level:3},{value:"Display the Current Plan",id:"display-the-current-plan",level:3},{value:"Display the Next Plan",id:"display-the-next-plan",level:3},{value:"<strong>Set Network Upgrade Plan Proposal</strong>",id:"set-network-upgrade-plan-proposal",level:3},{value:"<strong>Cancel Network Upgrade Plan Proposal</strong>",id:"cancel-network-upgrade-plan-proposal",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"6ba6105bbb57434085533c9c0e0497e0",children:"Concept"}),"\n",(0,s.jsx)(n.p,{children:'The Upgrade Module plays a crucial role in ensuring seamless transitions between different versions of the KIRA Network while preserving the current chain state. KIRA\'s governance is responsible for managing the upgrade process with permissions to propose and vote on the "Upgrade Plan". The Upgrade Plan is a set of JSON-formatted instructions hosted on-chain that details how and when validators should proceed with the upgrade. Additionally, the Upgrade Module offers a unique feature that informs new network participants about the necessary software resources to join the network, thereby ensuring the process of acquiring essential references and checksums is entirely trustless.'}),"\n",(0,s.jsx)(n.p,{children:"Upgrades can occur as either Hard Forks or Soft Forks. Hard Forks are executed when the new blockchain application is incompatible with the current chain state storage, requiring launching from a new genesis with a new chain ID to prevent double signing. On the other hand, Soft Forks are executed when no impact on the chain-state is expected, allowing the network to continue with the same chain ID without exporting and generating a new genesis file."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["If a consensus node casts a negative vote on an upgrade proposal that is later approved, it will automatically be ",(0,s.jsx)(n.a,{href:"/9f763be9-fbd3-452f-8c6e-6e418f34856f",children:(0,s.jsx)(n.code,{children:"paused"})})," at the beginning of the upgrade."]})}),"\n",(0,s.jsx)(n.h2,{id:"3e04b070eb15440fb32be7705a85fbdc",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Parameter"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Type"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Example"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Description"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"upgrade-118"})}),(0,s.jsx)(n.td,{children:"Name of the plan"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"max_enrolment_duration"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"integer"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"90"})}),(0,s.jsx)(n.td,{children:"Expected duration of upgrade in seconds"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"new_chain_id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"testnet-9"})}),(0,s.jsx)(n.td,{children:"Identifier of the new chain"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"old_chain_id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"testnet-8"})}),(0,s.jsx)(n.td,{children:"Identifier of the current chain"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"proposalID"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"668"})}),(0,s.jsx)(n.td,{children:"ID of the update proposal. It is set automatically."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"reboot_required"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsx)(n.td,{children:"Defines if nodes require OS reboot"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"resources"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"array"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'{"version": "testnet-9","url":https://github.com/KiraCore/kira","id": "kira"},'})}),(0,s.jsxs)(n.td,{children:["A list of resources to be used in the pipeline, such as images or external dependencies. Includes: ",(0,s.jsx)(n.code,{children:"url"}),", ",(0,s.jsx)(n.code,{children:"checksum"}),", ",(0,s.jsx)(n.code,{children:"version"}),", ",(0,s.jsx)(n.code,{children:"id"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"rollback_checksum"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"upgrade-118-roll"})}),(0,s.jsx)(n.td,{children:"Checksum to use when rolling back the chain"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"skip_handler"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsxs)(n.td,{children:["Defines if ",(0,s.jsx)(n.code,{children:"sekaid"})," on-chain handlers of the upgrade process should be skipped. If ",(0,s.jsx)(n.code,{children:"true"}),", ",(0,s.jsx)(n.code,{children:"sekaid"})," version changes will be omitted and the network will continue running. If ",(0,s.jsx)(n.code,{children:"false"}),", the network will halt at the ",(0,s.jsx)(n.code,{children:"upgrade_time"})," and remain stopped until ",(0,s.jsx)(n.code,{children:"sekaid"})," binary is upgraded"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"instate_upgrade"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsxs)(n.td,{children:["Defines if database state should be deleted or persisted. If set to ",(0,s.jsx)(n.code,{children:"true"})," then a Hard Fork will be executed and the ",(0,s.jsx)(n.code,{children:"new_chain_id"})," and ",(0,s.jsx)(n.code,{children:"old_chain_id"})," must be different. If set to ",(0,s.jsx)(n.code,{children:"false"})," , a Soft Fork will be executed and the database does not have to be erased."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"upgrade_time"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"integer"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1641573000"})}),(0,s.jsx)(n.td,{children:"Unix timestamp of the exact time the update should be executed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"26a1fdae5da44a1087d2e19c99f98566",children:"Upgrade configuration examples"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Hard Fork with no change made in ",(0,s.jsx)(n.code,{children:"sekaid"})," binary - used to upgrade other binaries such as INTERX or infrastructure manager, and wiping old database state (e.g. to save disk space)","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"instate_upgrade"})," - ",(0,s.jsx)(n.code,{children:"false"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"skip_handler"})," - ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"new_chain_id"})," - MUST be different then ",(0,s.jsx)(n.code,{children:"old_chain_id"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Hard Fork with changes in ",(0,s.jsx)(n.code,{children:"sekaid"})," binary - used to upgrade network in the case where old database state is incompatible with new release","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"instate_upgrade"})," - ",(0,s.jsx)(n.code,{children:"false"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"skip_handler"})," - ",(0,s.jsx)(n.code,{children:"false"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"new_chain_id"})," - MUST be different then ",(0,s.jsx)(n.code,{children:"old_chain_id"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Soft Fork without changes in ",(0,s.jsx)(n.code,{children:"sekaid"})," binary  - used to upgrade other binaries, but preserve old database state","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"instate_upgrade"})," - TBD"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"skip_handler"})," - TBD"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"new_chain_id"})," - MUST be the same as ",(0,s.jsx)(n.code,{children:"old_chain_id"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"0cff5a2dae1b4f039c904237df25449e",children:"Upgrade plan example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n\t"plan": {\n\t\t"max_enrolment_duration": "90",\n\t\t"name": "upgrade-118",\n\t\t"new_chain_id": "testnet-9",\n\t\t"old_chain_id": "testnet-8",\n\t\t"proposalID": "668",\n\t\t"reboot_required": true,\n\t\t"resources": [\n\t\t\t{\n\t\t\t"checkout": "testnet-9",\n\t\t\t"git": "https://github.com/KiraCore/kira",\n\t\t\t"id": "kira"\n\t\t\t},\n\t\t\t{\n\t\t\t"checkout": "testnet-9",\n\t\t\t"git": "https://github.com/KiraCore/sekai",\n\t\t\t"id": "sekai"\n\t\t\t},\n\t\t\t{\n\t\t\t"checkout": "testnet-9",\n\t\t\t"git": "https://github.com/KiraCore/sekai",\n\t\t\t"id": "interx"\n\t\t\t}\n\t\t],\n\t\t"rollback_checksum": "upgrade-118-roll",\n\t\t"skip_handler": true,\n\t\t"upgrade_time": "1641573000"\n\t\t}\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"8576cd2745b74f64bd2df866b9ebc5cf",children:(0,s.jsx)(n.strong,{children:"Upgrade process"})}),"\n",(0,s.jsx)(n.p,{children:"The KIRA network can be upgraded through an off-chain mechanism executed by the daemon service of the KIRA Manager (KM). However, it is not mandatory to use KM to upgrade the network, and node operators can set up their own dedicated CD/CI pipeline tools, such as Jenkins or Teamcity."}),"\n",(0,s.jsx)(n.p,{children:"To keep up-to-date with upcoming upgrades, operators can obtain information from two INTERX endpoints:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://testnet-rpc.kira.network/api/kira/upgrade/current_plan",children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"/<ip>:11000/api/kira/upgrade/current_plan"})})}),": The \u201ccurrent\u201d plan contains information and resources regarding the current release."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://testnet-rpc.kira.network/api/kira/upgrade/next_plan",children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"/<ip>:11000/api/kira/upgrade/next_plan"})})}),": The \u201cnext\u201d plan contains information and resources regarding the upcoming release. Nodes can also obtain resource references, such as GitHub links and branches, specified in the \u201ccurrent\u201d plan endpoint of a trusted node while joining the network for the very first time."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"e101effdd1aa446eac7633d2a4475c77",children:"Manual hard fork"}),"\n",(0,s.jsxs)(n.p,{children:["If a new genesis file is required for a hard fork, and KM is not used, node operators must create it by first exporting genesis at the block height where the network stopped (node daemon should be shut down), and then passing it through a dedicated ",(0,s.jsx)(n.code,{children:"new-genesis-from-exported"})," command. It should be noted that the ",(0,s.jsx)(n.code,{children:"sekaid"})," application must be upgraded prior to executing the ",(0,s.jsx)(n.code,{children:"new-genesis-from-exported"})," command. Otherwise, it might not be able to interpret and convert the old genesis to the new."]}),"\n",(0,s.jsx)(n.p,{children:"Node operators can execute the following steps to manually hard fork the network:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'SEKAI="/home/go/src/github.com/kiracore/sekai"\nEXPORTED_GENESIS="/tmp/exported-genesis.json"\nNEW_GENESIS="/tmp/new-genesis.json"\n\n# Cleanup old files\nrm -fv $EXPORTED_GENESIS $NEW_GENESIS\n\n# Ensure sekaid process is killed gracefully\npkill -15 sekaid || echoWarn "WARNING: Failed to kill sekaid, process might already be dead"\n\n# Export current genesis\nsekaid export --home=$SEKAID_HOME > $EXPORTED_GENESIS\n\n# Update repository\ncd $SEKAI\ngit fetch --all\ngit checkout $BRANCH_TO_CHECKOUT\nmake install\n\n# Convert exported genesis to a new compatible version\nsekaid new-genesis-from-exported $EXPORTED_GENESIS $NEW_GENESIS\n\n'})}),"\n",(0,s.jsx)(n.h1,{id:"e33d542c95414e01b67b21abf61aa961",children:"CLI syntax & examples"}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Each CLI command and proposal process in KIRA requires specific permissions. These permissions must be added to the account's whitelist or obtained as sudo permissions for direct changes. Refer to the"})," ",(0,s.jsx)(n.a,{href:"/980ceb2f-9bc1-4133-aad0-bfb8a5c55536",children:(0,s.jsx)(n.em,{children:"Roles & Permissions"})})," ",(0,s.jsx)(n.em,{children:"documentation for more details."})," ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.code,{children:"$SIGNER"})})," ",(0,s.jsx)(n.em,{children:"represents the transaction signer's account name or address. For instructions on setting common flags as environment variables, such as"})," ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.code,{children:"$FLAGS_TX"})})," ",(0,s.jsx)(n.em,{children:"and"})," ",(0,s.jsxs)(n.em,{children:[(0,s.jsx)(n.code,{children:"$FLAGS_QR"}),"__, see the"]}),"  ",(0,s.jsx)(n.em,{children:"section"})]})}),"\n",(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(d.Z,{value:"transactions",label:"Transactions",children:(0,s.jsx)(n.p,{children:"There is no transactions other than the governance proposals for this sub-module."})}),(0,s.jsxs)(d.Z,{value:"queries",label:"Queries",children:[(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.code,{children:"current-plan"})}),(0,s.jsx)(n.th,{children:"Query the current network upgrade plan."})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"next-plan"})}),(0,s.jsx)(n.td,{children:"Query the next network upgrade plan."})]})})]}),(0,s.jsx)(n.h3,{id:"display-the-current-plan",children:"Display the Current Plan"}),(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"current-plan"})," command to retrieve the current network upgrade plan."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sekaid query upgrade current-plan $FLAGS_QR | jq\n"})}),(0,s.jsx)(n.h3,{id:"display-the-next-plan",children:"Display the Next Plan"}),(0,s.jsxs)(n.p,{children:["To query the next network upgrade plan, use the ",(0,s.jsx)(n.code,{children:"next-plan"})," command."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sekaid query upgrade next-plan $FLAGS_QR | jq\n"})})]}),(0,s.jsxs)(d.Z,{value:"governance",label:"Governance",children:[(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.code,{children:"proposal-set-plan"})}),(0,s.jsx)(n.th,{children:"Create a proposal to set a network upgrade plan."})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"proposal-cancel-plan"})}),(0,s.jsx)(n.td,{children:"Create a proposal to cancel an existing upgrade plan."})]})})]}),(0,s.jsx)(n.h3,{id:"set-network-upgrade-plan-proposal",children:(0,s.jsx)(n.strong,{children:"Set Network Upgrade Plan Proposal"})}),(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["If a consensus node casts a negative vote on an upgrade proposal that is later approved, it will automatically be ",(0,s.jsx)(n.a,{href:"/9f763be9-fbd3-452f-8c6e-6e418f34856f",children:(0,s.jsx)(n.code,{children:"paused"})})," at the beginning of the upgrade."]})}),(0,s.jsxs)(n.p,{children:["The CLI command, ",(0,s.jsx)(n.code,{children:"proposal-set-plan"}),", is used to create a proposal to set an upgrade plan for the network. If voted, the upgrade plan is saved and will be overwritten by any subsequent proposals voted before the ",(0,s.jsx)(n.code,{children:"$MIN_UPGRADE_TIME"}),". The command accepts the following flags:"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Flags"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$TITLE"}),": Title of the proposal."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$DESCRIPTION"}),": Description of the proposal."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$UPGRADEMEMO"}),": Upgrade proposal memo."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$NAME"}),": Upgrade name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$INSTATEUPGRADE"}),": Boolean indicating instate upgrade (true for hard fork with new genesis file/soft fork)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$SKIPHANDLER"}),": Boolean indicating if handler should be skipped (true if change in sekaid version)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$OLDCHAINID"}),": Old chain id."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$NEWCHAINID"}),": New chain id."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$MINUPGRADETIME"}),": Unix timestamp of the exact time the update should be executed."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$RESOURCES"}),": List of resources to be used in the pipeline."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$ROLLBACKMEMO"}),": Checksum to use when rolling back the chain."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$MAXENROLLMENTDURATION"}),": Expected duration of upgrade in seconds."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$REBOOTREQUIRED"}),": Node reboot requirement (true if required)."]}),"\n"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sekaid tx customgov proposal-set-plan \\\n--from=$SIGNER $FLAGS_TX \\\n--title=$TITLE --description=$DESCRIPTION \\\n--name=$NAME --resources=$RESOURCES \\\n--min-upgrade-time=$MIN_UPGRADE_TIME \\\n--old-chain-id=$OLD_CHAIN_ID \\\n--new-chain-id=$NEW_CHAIN_ID \\\n--rollback-memo=$ROLLBACK_MEMO \\\n--max-enrollment-duration=$MAX_ENROLLMENT_DURATION \\\n--upgrade-memo=$UPGRADE_MEMO \\\n--instate-upgrade=$INSTATE_UPGRADE \\\n--reboot-required=$REBOOT_REQUIRED \\\n--skip-handler=$SKIP_HANDLER\n"})}),(0,s.jsx)(n.h3,{id:"cancel-network-upgrade-plan-proposal",children:(0,s.jsx)(n.strong,{children:"Cancel Network Upgrade Plan Proposal"})}),(0,s.jsxs)(n.p,{children:["The CLI command, ",(0,s.jsx)(n.code,{children:"proposal-cancel-plan"}),", is used to create a proposal to cancel an existing upgrade plan for the network. This proposal is not necessary if the goal is the replace an upgrade plan as the ",(0,s.jsx)(n.code,{children:"proposal-set-plan"})," command overwrite any existing upgrade plan. The command accepts the following flags:"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Flags"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$TITLE"}),": The title of the proposal."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$DESCRIPTION"}),": The description of the proposal."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$NAME"}),": The name of the upgrade plan to be cancelled."]}),"\n"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sekaid tx customgov proposal-cancel-plan \\\n--from=$SIGNER $FLAGS_TX \\\n--title=$TITLE --description=$DESCRIPTION \\\n--name=$NAME\n"})})]})]}),"\n",(0,s.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},5162:(e,n,r)=>{r.d(n,{Z:()=>d});r(7294);var s=r(6905);const t={tabItem:"tabItem_Ymn6"};var i=r(5893);function d(e){let{children:n,hidden:r,className:d}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.Z)(t.tabItem,d),hidden:r,children:n})}},4866:(e,n,r)=>{r.d(n,{Z:()=>v});var s=r(7294),t=r(6905),i=r(2466),d=r(6550),a=r(469),l=r(1980),c=r(7392),o=r(12);function h(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:r}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:r,attributes:s,default:t}}=e;return{value:n,label:r,attributes:s,default:t}}))}(r);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function p(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:r}=e;const t=(0,d.k6)(),i=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,l._X)(i),(0,s.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})}),[i,t])]}function j(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,i=u(e),[d,l]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=r.find((e=>e.default))??r[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:i}))),[c,h]=x({queryString:r,groupId:t}),[j,g]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,i]=(0,o.Nk)(r);return[t,(0,s.useCallback)((e=>{r&&i.set(e)}),[r,i])]}({groupId:t}),f=(()=>{const e=c??j;return p({value:e,tabValues:i})?e:null})();(0,a.Z)((()=>{f&&l(f)}),[f]);return{selectedValue:d,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),g(e)}),[h,g,i]),tabValues:i}}var g=r(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=r(5893);function m(e){let{className:n,block:r,selectedValue:s,selectValue:d,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),o=e=>{const n=e.currentTarget,r=l.indexOf(n),t=a[r].value;t!==s&&(c(n),d(t))},h=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.Z)("tabs",{"tabs--block":r},n),children:a.map((e=>{let{value:n,label:r,attributes:i}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>l.push(e),onKeyDown:h,onClick:o,...i,className:(0,t.Z)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":s===n}),children:r??n},n)}))})}function k(e){let{lazy:n,children:r,selectedValue:t}=e;const i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===t));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function w(e){const n=j(e);return(0,b.jsxs)("div",{className:(0,t.Z)("tabs-container",f.tabList),children:[(0,b.jsx)(m,{...e,...n}),(0,b.jsx)(k,{...e,...n})]})}function v(e){const n=(0,g.Z)();return(0,b.jsx)(w,{...e,children:h(e.children)},String(n))}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>d});var s=r(7294);const t={},i=s.createContext(t);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);